<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIUD 2025 - Programma Congresso</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #8B1538 0%, #B85450 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #8B1538 0%, #B85450 100%);
            color: white;
            padding: 0.75rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 1.3rem;
            margin-bottom: 0.25rem;
        }

        .header p {
            font-size: 0.8rem;
            opacity: 0.9;
            line-height: 1.2;
        }

        .filters {
            padding: 0.75rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            position: sticky;
            top: 80px; /* Adjusted based on header height */
            z-index: 99;
        }

        .filter-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .filter-row-full {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            /* margin-bottom: 0.75rem; */ /* Removed to reduce space after removing search */
        }

        .filter-dropdown {
            position: relative;
        }

        .dropdown-select {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid #8B1538;
            border-radius: 8px;
            background: white;
            color: #8B1538;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%238B1538' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        .dropdown-select:focus {
            outline: none;
            border-color: #B85450;
            box-shadow: 0 0 0 3px rgba(139, 21, 56, 0.1);
        }

        .content {
            padding: 1rem;
        }

        .day-section {
            margin-bottom: 2rem;
        }

        .day-header {
            background: linear-gradient(135deg, #8B1538 0%, #B85450 100%);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .day-header h2 {
            font-size: 1.3rem;
            margin-bottom: 0.25rem;
        }

        .day-header .date {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .time-slot-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        .time-slot-info h3 {
            color: #1976d2;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .time-slot-info p {
            color: #666;
            font-size: 0.85rem;
            margin: 0;
        }

        .concurrent-sessions {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .session-card {
            background: white;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            border-left: 4px solid #8B1538;
        }

        .session-header {
            padding: 1rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .session-time {
            font-weight: 600;
            color: #8B1538;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .session-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .session-info {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .session-room, .session-type, .session-ecm {
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .session-room {
            background: #B85450;
            color: white;
        }

        .session-type {
            background: #e9ecef;
            color: #495057;
        }

        .session-ecm {
            background: #28a745;
            color: white;
        }

        .session-content {
            padding: 1rem;
        }

        .session-moderators {
            margin-bottom: 0.75rem;
        }

        .session-moderators strong {
            color: #8B1538;
        }

        .session-program {
            list-style: none;
        }

        .session-program li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f8f9fa;
            display: flex;
            gap: 0.75rem;
        }

        .session-program li:last-child {
            border-bottom: none;
        }

        .program-time {
            font-weight: 600;
            color: #8B1538;
            min-width: 50px;
            font-size: 0.9rem;
        }

        .program-item {
            flex: 1;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .no-results {
            text-align: center;
            padding: 2rem;
            color: #6c757d;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.2rem;
            }
            
            .session-title {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>SIUD 2025</h1>
            <p>49° Congresso Nazionale SIUD<br>
            23° Congresso SIUD Fisioterapisti, Infermieri, Ostetriche<br>
            Bologna, 26-28 Giugno • Hotel Savoia Regency</p>
        </header>

        <div class="filters">
            <div class="filter-row">
                <div class="filter-dropdown">
                    <select class="dropdown-select" id="dayFilter">
                        <option value="all">Tutti i giorni</option>
                        <option value="2025-06-26">Gio 26 Giugno</option>
                        <option value="2025-06-27">Ven 27 Giugno</option>
                        <option value="2025-06-28">Sab 28 Giugno</option>
                    </select>
                </div>
                
                <div class="filter-dropdown">
                    <select class="dropdown-select" id="timeSlotFilter">
                        <option value="all">Tutte le fasce orarie</option>
                    </select>
                </div>
            </div>
            
            <div class="filter-row-full">
                <div class="filter-dropdown">
                    <select class="dropdown-select" id="roomFilter">
                        <option value="all">Tutte le sale</option>
                        <option value="auditorium">Auditorium</option>
                        <option value="napoleon">Sala Napoleon</option>
                        <option value="nettuno">Sala Nettuno</option>
                    </select>
                </div>
                
                <div class="filter-dropdown">
                    <select class="dropdown-select" id="typeFilter">
                        <option value="all">Tutte le tipologie</option>
                        <option value="workshop">Workshop</option>
                        <option value="lettura">Letture</option>
                        <option value="sessione">Sessioni</option>
                        <option value="abstract">Abstract</option>
                        <option value="sponsor">Sponsorizzate</option>
                    </select>
                </div>
            </div>
        </div>

        <main class="content" id="programContent">
            <!-- Il contenuto verrà generato dinamicamente -->
        </main>
    </div>

    <script>
        // --- INIZIO DATI PROGRAMMA ---
// Dati del programma completo SIUD 2025
        const programData = [
            {
                date: "2025-06-26",
                dayName: "Giovedì 26 Giugno",
                sessions: [
                    {
                        id: "reg-26",
                        time: "09.30-11.45",
                        title: "Registrazione Partecipanti",
                        room: "auditorium",
                        type: "registrazione",
                        moderators: "",
                        program: []
                    },
                    {
                        id: "corso-retention",
                        time: "10.00-11.30",
                        title: "Corso Precongressuale - La ritenzione urinaria",
                        room: "auditorium",
                        type: "workshop",
                        moderators: "Coordinatori: M. Fiori, E. Fragalà, E. Lamanna, V. Vagnoni",
                        program: [
                            { time: "10.00", item: "RU nell'uomo - O. Saleh" },
                            { time: "10.10", item: "RU nella donna - M. Bacchiani" },
                            { time: "10.20", item: "RU nel neurologico - E. Fragalà" },
                            { time: "10.30", item: "Approccio conservativo - L. Amaducci, A. Mazzini" },
                            { time: "10.40", item: "Chirurgia - A. Feruzzi" },
                            { time: "10.50", item: "Neuromodulazione non invasiva - C. Sedioli" },
                            { time: "11.05", item: "Neuromodulazione invasiva - F. Cappellano" },
                            { time: "11.20", item: "Discussione" }
                        ]
                    },
                    {
                        id: "inaugurazione",
                        time: "11.45-12.15",
                        title: "Inaugurazione",
                        room: "auditorium",
                        type: "sessione",
                        ecm: false,
                        moderators: "A. Giammò, E. Brunocilla, E. Fragalà, R. Gunelli, R. Schiavina",
                        program: []
                    },
                    {
                        id: "lettura-zanollo",
                        time: "12.15-12.45",
                        title: "Lettura Zanollo",
                        room: "auditorium",
                        type: "lettura",
                        ecm: false,
                        moderators: "Introduce: A. Giammò",
                        program: [
                            { time: "", item: "The role and timing of urodynamics in 2025 - G. Vignoli" }
                        ]
                    },
                    {
                        id: "controversie-funzionali",
                        time: "12.45-13.30",
                        title: "Controversie Funzionali... Talk interattivo multidisciplinare",
                        room: "auditorium",
                        type: "sessione",
                        ecm: "ECM 1",
                        moderators: "Moderatore: F. Fusco",
                        program: []
                    },
                    {
                        id: "bla-bladder",
                        time: "12.45-13.30",
                        title: "Bla...Bla...Bladder and Bowel - La stitichezza è donna",
                        room: "nettuno",
                        type: "sessione",
                        ecm: "FIO - ECM 2",
                        moderators: "Conduce: A. Cicalese",
                        program: []
                    },
                    {
                        id: "spazio-ics",
                        time: "13.30-14.15",
                        title: "Spazio ICS",
                        room: "auditorium",
                        type: "sessione",
                        moderators: "Introduce: C. De Nunzio",
                        program: [
                            { time: "13.35", item: "Detrusor underactivity - T. Tarcan" },
                            { time: "13.55", item: "Detrusor overactivity - M. Drake" }
                        ]
                    },
                    {
                        id: "siams-sigg",
                        time: "14.15-15.00",
                        title: "Sessione SIAMS-SIGG: Invecchiamento attivo, disfunzioni metaboliche e LUTS",
                        room: "auditorium",
                        type: "sessione",
                        ecm: "ECM 1",
                        moderators: "Moderatori: D. Leosco, V. Li Marzi, L. Vignozzi",
                        program: [
                            { time: "14.15", item: "Nell'uomo - V. Li Marzi" },
                            { time: "14.22", item: "Nella donna - M. Marturano" },
                            { time: "14.29", item: "Incontinenza urinaria: il ruolo del geriatra - A. Ungar" },
                            { time: "14.39", item: "Malattie metaboliche e OAB - L. Vignozzi" },
                            { time: "14.49", item: "Discussione" }
                        ]
                    },
                    {
                        id: "abstract-neurourologia",
                        time: "14.15-15.00",
                        title: "Sessione Abstract 1 - Neurourologia",
                        room: "napoleon",
                        type: "abstract",
                        moderators: "Moderatori: A. Herms, M. Lamartina",
                        program: []
                    },
                    {
                        id: "abstract-fio-dolore",
                        time: "14.15-15.00",
                        title: "Sessione Abstract FIO - Dolore Neurourologia e Pavimento Pelvico",
                        room: "nettuno",
                        type: "abstract",
                        moderators: "Moderatori: C. Bellenghi, A. Bortolami, O. Risi, S. Scarfi",
                        program: []
                    },
                    {
                        id: "sponsor-pomeriggio",
                        time: "15.00-16.45",
                        title: "Sessioni Sponsorizzate",
                        room: "auditorium",
                        type: "sponsor",
                        moderators: "",
                        program: []
                    },
                    {
                        id: "risultati-funzionali",
                        time: "16.45-17.30",
                        title: "Risultati funzionali dei trattamenti chirurgici versus radioterapici in area pelvica",
                        room: "auditorium",
                        type: "sessione",
                        moderators: "Moderatori: R. Bertolo, R. Schiavina",
                        program: [
                            { time: "16.45", item: "Nell'uomo - A. Briganti" },
                            { time: "16.55", item: "Nella donna - A. Ercoli" },
                            { time: "17.05", item: "... e la Radioterapia? - A. Venturi" },
                            { time: "17.15", item: "Discussione" }
                        ]
                    },
                    {
                        id: "siud-simg",
                        time: "16.45-17.30",
                        title: "Sessione SIUD + SIMG: Alimentazione, stili di vita e disturbi minzionali",
                        room: "napoleon",
                        type: "sessione",
                        moderatori: "Moderatori: C. Cricelli, A. Giammò",
                        program: [
                            { time: "16.45", item: "Sulle cistiti ricorrenti - M. Cupardo" },
                            { time: "16.53", item: "Su LUTS-BPH - M. Creta" },
                            { time: "17.01", item: "Sull'incontinenza urinaria - F. Savoca" },
                            { time: "17.09", item: "Sul dolore pelvico cronico - M. Mancini" },
                            { time: "17.17", item: "Discussione" }
                        ]
                    },
                    {
                        id: "abstract-specializzandi",
                        time: "16.45-17.30",
                        title: "Migliori Abstract Specialisti in Formazione",
                        room: "nettuno",
                        type: "abstract",
                        moderators: "Moderatori: M.A. Cerruto, L. Savelli, L. Vacca",
                        program: []
                    },
                    {
                        id: "lettura-siu",
                        time: "17.30-17.40",
                        title: "Lettura SIU (Société Internationale d'Urologie)",
                        room: "auditorium",
                        type: "lettura",
                        moderators: "Introduce: C. De Nunzio",
                        program: [
                            { time: "", item: "App and Artificial Intelligence in LUTS BPH managements - S. Gravas" }
                        ]
                    },
                    {
                        id: "siud-eau-esfu",
                        time: "17.40-18.30",
                        title: "Sessione SIUD-EAU-ESFU",
                        room: "auditorium",
                        type: "sessione",
                        moderators: "Moderatori: E. Costantini, C. De Nunzio, B. Rocco, J. N. Cornu",
                        program: [
                            { time: "17.40", item: "Prostate surgery and Urodynamics: Upstream Trial... an update - M. Drake" },
                            { time: "17.50", item: "Can we predict and manage persistent LUTS after BOO surgery - T. Tarcan" },
                            { time: "18.00", item: "In males - E. Finazzi Agrò" },
                            { time: "18.08", item: "In females - G. Campagna" },
                            { time: "18.16", item: "Discussione" }
                        ]
                    },
                    {
                        id: "siud-aiug",
                        time: "18.30-19.30",
                        title: "SIUD-AIUG: Controversie nel trattamento del prolasso apicale",
                        room: "auditorium",
                        type: "sessione",
                        moderators: "Moderatori: M. Balzarro, M. Cervigni, E. Russo",
                        program: [
                            { time: "18.30", item: "Urodinamica nel POP: ha ancora un ruolo? - E. Finazzi Agrò" },
                            { time: "18.40", item: "Sacrocolpopessi versus sospensione laterale - E. Costantini" },
                            { time: "18.50", item: "Sacrospinoso versus Sospensione Uterosacrale - G. Bracco" },
                            { time: "19.00", item: "V-notes nel difetto apicale - T. Simoncini" },
                            { time: "19.10", item: "Cistocele associato a deficit del compartimento apicale - M. Frigerio" },
                            { time: "19.20", item: "Discussione" }
                        ]
                    },
                    {
                        id: "abstract-luts-26",
                        time: "18.30-19.30",
                        title: "Sessione Abstract 2 - LUTS",
                        room: "napoleon",
                        type: "abstract",
                        moderators: "Moderatori: S. Anastasio, A. Di Girolamo, A. Giannantoni",
                        program: []
                    },
                    {
                        id: "attivita-sportiva",
                        time: "18.30-19.30",
                        title: "Attività sportiva e salute pelvica",
                        room: "nettuno",
                        type: "sessione",
                        ecm: "FIO - ECM 2",
                        moderators: "Moderatori: G. Carbonara, D. Giraudo, A. Mollo, D. Pistolesi",
                        program: [
                            { time: "18.30", item: "L'influenza dell'attività sportiva sul pavimento pelvico - S. Giagio" },
                            { time: "18.45", item: "Sport e pavimento pelvico in gravidanza - I. Baini" },
                            { time: "18.55", item: "Return to run after pregnancy - E. Bassini" },
                            { time: "19.05", item: "Wheelchair sport come strumento di riabilitazione - G. Farì" },
                            { time: "19.15", item: "Discussione" }
                        ]
                    }
                ]
            },
            {
                date: "2025-06-27",
                dayName: "Venerdì 27 Giugno",
                sessions: [
                    {
                        id: "workshop-addiction-27",
                        time: "08.00-10.00",
                        title: "WORKSHOP A - Addictive lifestyle and pelvic floor dysfunction",
                        room: "napoleon",
                        type: "workshop",
                        moderators: "Coordinatori: V. Mancini, S. Musco",
                        program: [
                            { time: "08.00", item: "Alimentazione e microbiota intestinale - G. Bazzocchi" },
                            { time: "08.15", item: "Sedentarietà - E. Bertolucci" },
                            { time: "08.30", item: "Alcol - S. Musco" },
                            { time: "08.45", item: "Fumo - E. Fragalà" },
                            { time: "09.00", item: "Gaming - G. Mosiello" },
                            { time: "09.15", item: "Ipersessualità - G. Sampogna" },
                            { time: "09.30", item: "Sostanze stupefacenti - M.L. Gallo" },
                            { time: "09.45", item: "Discussione" }
                        ]
                    },
                    {
                        id: "workshop-incontinenza-27",
                        time: "08.00-10.00",
                        title: "WORKSHOP B - Incontinenza urinaria femminile: punti essenziali in una nuova era",
                        room: "auditorium",
                        type: "workshop",
                        moderators: "Coordinatori: M. Balzarro, V. Li Marzi",
                        program: [
                            { time: "08.00", item: "Anatomia chirurgica e funzionale del pavimento pelvico femminile - G. Campagna" },
                            { time: "08.12", item: "11 sfumature di incontinenza urinaria femminile - L. Vacca" },
                            { time: "08.24", item: "Urodinamica non invasiva ed invasiva nell'incontinenza urinaria - E. Rubilotta" },
                            { time: "08.36", item: "Incontinenza urinaria da urgenza: da dove partire... - L. Pelizzari" },
                            { time: "08.48", item: "... e dove arrivare - E. Russo" },
                            { time: "09.00", item: "Incontinenza urinaria da sforzo: da dove partire... - L. De Palma" },
                            { time: "09.12", item: "...dove arrivare - M. Balzarro" },
                            { time: "09.24", item: "LUTS e prolasso organi pelvici - M. Serati" },
                            { time: "09.36", item: "Complicanze dei trattamenti per incontinenza urinaria - E. Illiano" },
                            { time: "09.48", item: "Discussione" }
                        ]
                    },
                    {
                        id: "workshop-mist-27",
                        time: "08.00-10.00",
                        title: "WORKSHOP C - Trattamenti mini invasivi per BPO (MIST)",
                        room: "nettuno",
                        type: "workshop",
                        moderators: "Coordinatori: C. De Nunzio, F. Fusco",
                        program: [
                            { time: "08.00", item: "Dalla TURP alle MIST: 40 anni di evoluzioni tecnologiche - A. Cicione" },
                            { time: "08.15", item: "Quale MIST per quale prostata - C. De Nunzio" },
                            { time: "08.30", item: "Quale MIST per quale paziente - P. Spatafora" },
                            { time: "08.45", item: "Come definire l'outcome dopo MIST - C. Manfredi" },
                            { time: "09.00", item: "Complicanze delle MIST - S. De Cillis" },
                            { time: "09.15", item: "Quando le MIST falliscono - M. Gacci" },
                            { time: "09.30", item: "Clinical case - A. Franco" },
                            { time: "09.45", item: "Discussione" }
                        ]
                    },
                    {
                        id: "lettura-eau-27",
                        time: "10.00-10.30",
                        title: "Lettura EAU",
                        room: "auditorium",
                        type: "lettura",
                        moderators: "Introduce: A. Giammò",
                        program: [
                            { time: "", item: "The central role of benign prostatic obstruction (BPO) in the management of male LUTS - J. N. Cornu" }
                        ]
                    },
                    {
                        id: "lettura-sinug",
                        time: "10.30-10.50",
                        title: "Lettura SINUG",
                        room: "auditorium",
                        type: "lettura",
                        moderators: "Introduce: S. Musco",
                        program: [
                            { time: "", item: "How to manage chronic urinary retention in females? - S. Arlandis" }
                        ]
                    },
                    {
                        id: "lettura-tcs",
                        time: "10.50-11.10",
                        title: "Lettura Turkish Continence Society (TCS)",
                        room: "auditorium",
                        type: "lettura",
                        moderators: "Introduce: F. Savoca",
                        program: [
                            { time: "", item: "How to manage chronic urinary retention in males? - A. Ergen" }
                        ]
                    },
                    {
                        id: "oab-goodbye",
                        time: "11.10-11.30",
                        title: "OAB: Goodbye Urodynamics",
                        room: "auditorium",
                        type: "sessione",
                        moderators: "Moderatore: E. Finazzi Agrò",
                        program: [
                            { time: "", item: "Report on Future trial - Y. Al Salhi" }
                        ]
                    },
                    {
                        id: "chirurgia-robotica-27",
                        time: "11.30-12.30",
                        title: "VIDEO TALK - Chirurgia Robotica Funzionale e ricostruttiva del basso tratto urinario",
                        room: "auditorium",
                        type: "sessione",
                        ecm: "ECM 1",
                        moderators: "Coordinatore: R. Schiavina",
                        program: [
                            { time: "11.30", item: "Plastica y-v nella sclerosi del collo - A. Antonelli" },
                            { time: "11.38", item: "Risultati funzionali della neovescica ortotopica - P. Gontero" },
                            { time: "11.46", item: "Chirurgia robotica nel trattamento delle fistole - E. Brunocilla" },
                            { time: "11.52", item: "Prostatectomia semplice robotica - M. Gacci" },
                            { time: "12.00", item: "L'approccio robotico nelle stenosi del collo vescicale - C. Fiori" },
                            { time: "12.20", item: "Discussione" }
                        ]
                    },
                    {
                        id: "luts-neurodegenerative-27",
                        time: "11.30-12.30",
                        title: "LUTS nelle malattie neurodegenerative",
                        room: "napoleon",
                        type: "sessione",
                        moderators: "Moderatori: P. Cortelli, C. Leone, S. Musco",
                        program: [
                            { time: "11.30", item: "Sinucleinopatie: Classificazione e Nuovi Criteri Diagnostici - G. Calandra Buonaura" },
                            { time: "11.45", item: "Fenotipi neurodegenerativi e disfunzioni del basso tratto urinario - G. Sampogna" },
                            { time: "11.55", item: "Terapia farmacologica o approccio multimodale? - A. Manassero" },
                            { time: "12.05", item: "Neuromodulazione: effetti sintomatici versus effetti modificanti la malattia - G. Pelliccioni" },
                            { time: "12.20", item: "Discussione" }
        // --- FINE DATI PROGRAMMA ---

        let currentFilters = {
            day: 'all',
            room: 'all',
            type: 'all',
            timeSlot: 'all'
        };

        function initApp() {
            populateTimeSlots();
            renderProgram();
            setupEventListeners();
        }

        function populateTimeSlots() {
            const timeSlots = new Set();
            
            programData.forEach(day => {
                day.sessions.forEach(session => {
                    timeSlots.add(session.time);
                });
            });

            const sortedTimeSlots = Array.from(timeSlots).sort((a, b) => a.localeCompare(b, undefined, {numeric: true}));
            const timeSlotSelect = document.getElementById('timeSlotFilter');
            
            timeSlotSelect.innerHTML = '<option value="all">Tutte le fasce orarie</option>';
            
            sortedTimeSlots.forEach(timeSlot => {
                const option = document.createElement('option');
                option.value = timeSlot;
                option.textContent = timeSlot;
                timeSlotSelect.appendChild(option);
            });
        }

        function setupEventListeners() {
            document.getElementById('dayFilter').addEventListener('change', (e) => {
                currentFilters.day = e.target.value;
                updateTimeSlotOptions();
                renderProgram();
            });

            document.getElementById('roomFilter').addEventListener('change', (e) => {
                currentFilters.room = e.target.value;
                renderProgram();
            });

            document.getElementById('typeFilter').addEventListener('change', (e) => {
                currentFilters.type = e.target.value;
                renderProgram();
            });

            document.getElementById('timeSlotFilter').addEventListener('change', (e) => {
                currentFilters.timeSlot = e.target.value;
                renderProgram();
            });
        }

        function updateTimeSlotOptions() {
            const timeSlots = new Set();
            
            programData.forEach(day => {
                if (currentFilters.day !== 'all' && day.date !== currentFilters.day) {
                    return;
                }
                
                day.sessions.forEach(session => {
                    timeSlots.add(session.time);
                });
            });

            const sortedTimeSlots = Array.from(timeSlots).sort((a, b) => a.localeCompare(b, undefined, {numeric: true}));
            const timeSlotSelect = document.getElementById('timeSlotFilter');
            const currentValue = timeSlotSelect.value;
            
            timeSlotSelect.innerHTML = '<option value="all">Tutte le fasce orarie</option>';
            
            sortedTimeSlots.forEach(timeSlot => {
                const option = document.createElement('option');
                option.value = timeSlot;
                option.textContent = timeSlot;
                timeSlotSelect.appendChild(option);
            });

            if (sortedTimeSlots.includes(currentValue)) {
                timeSlotSelect.value = currentValue;
            } else {
                timeSlotSelect.value = 'all';
                currentFilters.timeSlot = 'all';
            }
        }

        function renderProgram() {
            const container = document.getElementById('programContent');
            container.innerHTML = '';

            const filteredData = filterProgram();
            
            if (filteredData.length === 0 || filteredData.every(day => day.sessions.length === 0)) {
                container.innerHTML = '<div class="no-results">Nessun risultato trovato per i filtri selezionati.</div>';
                return;
            }

            if (currentFilters.timeSlot !== 'all') {
                renderByTimeSlot(filteredData, container);
            } else {
                renderByDay(filteredData, container);
            }
        }

        function renderByDay(filteredData, container) {
            filteredData.forEach(day => {
                if (day.sessions.length === 0) return;

                const daySection = document.createElement('div');
                daySection.className = 'day-section';
                daySection.innerHTML = `
                    <div class="day-header">
                        <h2>${day.dayName}</h2>
                        <div class="date">${formatDate(day.date)}</div>
                    </div>
                `;
                
                const sortedSessions = day.sessions.sort((a, b) => a.time.localeCompare(b.time, undefined, {numeric: true}));

                sortedSessions.forEach(session => {
                    const sessionCard = createSessionCard(session);
                    daySection.appendChild(sessionCard);
                });

                container.appendChild(daySection);
            });
        }

        function renderByTimeSlot(filteredData, container) {
            const sessionsByTimeSlot = {};
            
            filteredData.forEach(day => {
                day.sessions.forEach(session => {
                    if (!sessionsByTimeSlot[session.time]) {
                        sessionsByTimeSlot[session.time] = [];
                    }
                    sessionsByTimeSlot[session.time].push({
                        ...session,
                        dayName: day.dayName
                    });
                });
            });

            const sortedTimeSlots = Object.keys(sessionsByTimeSlot).sort((a, b) => a.localeCompare(b, undefined, {numeric: true}));

            sortedTimeSlots.forEach(timeSlot => {
                const sessions = sessionsByTimeSlot[timeSlot];
                
                const timeSlotSection = document.createElement('div');
                timeSlotSection.className = 'day-section';
                
                const timeSlotHeader = document.createElement('div');
                timeSlotHeader.className = 'time-slot-info';
                timeSlotHeader.innerHTML = `
                    <h3>⏰ ${timeSlot}</h3>
                    <p>Sessioni contemporanee in ${sessions.length} sala${sessions.length > 1 ? 'e' : ''}</p>
                `;
                timeSlotSection.appendChild(timeSlotHeader);

                const concurrentContainer = document.createElement('div');
                concurrentContainer.className = 'concurrent-sessions';

                sessions.forEach(session => {
                    const sessionCard = createSessionCard(session);
                    if (currentFilters.day === 'all') {
                        const dayBadge = document.createElement('span');
                        dayBadge.className = 'session-type';
                        dayBadge.textContent = session.dayName.split(' ')[0].substring(0,3);
                        dayBadge.style.background = '#6c757d';
                        dayBadge.style.color = 'white';
                        sessionCard.querySelector('.session-info').appendChild(dayBadge);
                    }
                    concurrentContainer.appendChild(sessionCard);
                });

                timeSlotSection.appendChild(concurrentContainer);
                container.appendChild(timeSlotSection);
            });
        }

        function filterProgram() {
            return programData.map(day => {
                if (currentFilters.day !== 'all' && day.date !== currentFilters.day) {
                    return { ...day, sessions: [] };
                }

                const filteredSessions = day.sessions.filter(session => {
                    if (currentFilters.room !== 'all' && session.room !== currentFilters.room) {
                        return false;
                    }

                    if (currentFilters.type !== 'all' && session.type !== currentFilters.type) {
                        return false;
                    }

                    if (currentFilters.timeSlot !== 'all' && session.time !== currentFilters.timeSlot) {
                        return false;
                    }

                    return true;
                });

                return { ...day, sessions: filteredSessions };
            });
        }

        function createSessionCard(session) {
            const card = document.createElement('div');
            card.className = 'session-card';

            let ecmBadge = '';
            if (session.ecm) {
                ecmBadge = `<span class="session-ecm">${session.ecm}</span>`;
            }

            let programHTML = '';
            if (session.program && session.program.length > 0) {
                programHTML = `
                    <ul class="session-program">
                        ${session.program.map(item => `
                            <li>
                                <span class="program-time">${item.time}</span>
                                <span class="program-item">${item.item}</span>
                            </li>
                        `).join('')}
                    </ul>
                `;
            }
            
            let moderatorsHTML = '';
            if (session.moderators) {
                if (session.moderators.includes(':')) {
                    const parts = session.moderators.split(':');
                    moderatorsHTML = `<div class="session-moderators"><strong>${parts[0]}:</strong> ${parts[1]}</div>`;
                } else {
                    moderatorsHTML = `<div class="session-moderators">${session.moderators}</div>`;
                }
            }


            card.innerHTML = `
                <div class="session-header">
                    <div class="session-time">${session.time}</div>
                    <div class="session-title">${session.title}</div>
                    <div class="session-info">
                        <span class="session-room">${getRoomName(session.room)}</span>
                        <span class="session-type">${getTypeName(session.type)}</span>
                        ${ecmBadge}
                    </div>
                    ${moderatorsHTML}
                </div>
                ${programHTML ? `<div class="session-content">${programHTML}</div>` : ''}
            `;

            return card;
        }

        function getRoomName(room) {
            const rooms = {
                'auditorium': 'Auditorium',
                'napoleon': 'Sala Napoleon',
                'nettuno': 'Sala Nettuno'
            };
            return rooms[room] || room;
        }

        function getTypeName(type) {
            const types = {
                'workshop': 'Workshop',
                'lettura': 'Lettura',
                'sessione': 'Sessione',
                'abstract': 'Abstract',
                'sponsor': 'Sponsorizzata',
                'registrazione': 'Registrazione',
                'pausa': 'Pausa'
            };
            return types[type] || type;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            date.setMinutes(date.getMinutes() + date.getTimezoneOffset());
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return date.toLocaleDateString('it-IT', options);
        }

        // Inizializza l'app
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
